/*! v2.6.8-466bfe10, 2018-04-30T09:23:17Z */
!function(a){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=a();else if("function"==typeof define&&define.amd)define([],a);else{var b;b="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,(b.dashjs||(b.dashjs={})).Protection=a()}}(function(){return function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c||a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),f=function(){function a(){d(this,a)}return e(a,[{key:"extend",value:function(a,b){if(a){var c=!!b&&b.override,d=!!b&&b.publicOnly;for(var e in a)!a.hasOwnProperty(e)||this[e]&&!c||d&&-1===a[e].indexOf("public_")||(this[e]=a[e])}}}]),a}();c.default=f,b.exports=c.default},{}],2:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),f=function(){function a(){d(this,a),this.init()}return e(a,[{key:"init",value:function(){this.CLEARKEY_KEYSTEM_STRING="org.w3.clearkey",this.WIDEVINE_KEYSTEM_STRING="com.widevine.alpha",this.PLAYREADY_KEYSTEM_STRING="com.microsoft.playready"}}]),a}(),g=new f;c.default=g,b.exports=c.default},{}],3:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),f=function(){function a(){d(this,a)}return e(a,null,[{key:"findCencContentProtection",value:function(a){for(var b=null,c=0;c<a.length;++c){var d=a[c];"urn:mpeg:dash:mp4protection:2011"===d.schemeIdUri.toLowerCase()&&"cenc"===d.value.toLowerCase()&&(b=d)}return b}},{key:"getPSSHData",value:function(a){var b=8,c=new DataView(a),d=c.getUint8(b);return b+=20,d>0&&(b+=4+16*c.getUint32(b)),b+=4,a.slice(b)}},{key:"getPSSHForKeySystem",value:function(b,c){var d=a.parsePSSHList(c);return d.hasOwnProperty(b.uuid.toLowerCase())?d[b.uuid.toLowerCase()]:null}},{key:"parseInitDataFromContentProtection",value:function(a,b){return"pssh"in a?b.decodeArray(a.pssh.__text).buffer:null}},{key:"parsePSSHList",value:function(a){if(null===a)return[];for(var b=new DataView(a.buffer||a),c=!1,d={},e=0;!c;){var f=void 0,g=void 0,h=void 0,i=void 0,j=e;if(e>=b.buffer.byteLength)break;if(f=b.getUint32(e),g=e+f,e+=4,1886614376===b.getUint32(e))if(e+=4,0===(h=b.getUint8(e))||1===h){e++,e+=3,i="";var k=void 0,l=void 0;for(k=0;k<4;k++)l=b.getUint8(e+k).toString(16),i+=1===l.length?"0"+l:l;for(e+=4,i+="-",k=0;k<2;k++)l=b.getUint8(e+k).toString(16),i+=1===l.length?"0"+l:l;for(e+=2,i+="-",k=0;k<2;k++)l=b.getUint8(e+k).toString(16),i+=1===l.length?"0"+l:l;for(e+=2,i+="-",k=0;k<2;k++)l=b.getUint8(e+k).toString(16),i+=1===l.length?"0"+l:l;for(e+=2,i+="-",k=0;k<6;k++)l=b.getUint8(e+k).toString(16),i+=1===l.length?"0"+l:l;e+=6,i=i.toLowerCase(),b.getUint32(e),e+=4,d[i]=b.buffer.slice(j,g),e=g}else e=g;else e=g}return d}}]),a}();c.default=f,b.exports=c.default},{}],4:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(){function a(a){var c=null,e=(0,i.default)(d).getInstance();e.setConfig({log:a.log,BASE64:a.BASE64}),e.initialize();var f=b(a);return!c&&f&&(c=(0,g.default)(d).create({protectionModel:f,protectionKeyController:e,eventBus:a.eventBus,log:a.log,events:a.events,BASE64:a.BASE64,constants:a.constants}),a.capabilities.setEncryptedMediaSupported(!0)),c}function b(a){var b=a.log,e=a.eventBus,f=a.errHandler,g=a.videoModel?a.videoModel.getElement():null;return g&&void 0===g.onencrypted||g&&void 0===g.mediaKeys?c(g,s)?(b("EME detected on this user agent! (ProtectionModel_3Feb2014)"),(0,o.default)(d).create({log:b,eventBus:e,events:a.events,api:c(g,s)})):c(g,r)?(b("EME detected on this user agent! (ProtectionModel_01b)"),(0,q.default)(d).create({log:b,eventBus:e,errHandler:f,events:a.events,api:c(g,r)})):(b("No supported version of EME detected on this user agent! - Attempts to play encrypted content will fail!"),null):(b("EME detected on this user agent! (ProtectionModel_21Jan2015)"),(0,m.default)(d).create({log:b,eventBus:e,events:a.events}))}function c(a,b){for(var c=0;c<b.length;c++){var d=b[c];if("function"==typeof a[d[Object.keys(d)[0]]])return d}return null}var d=this.context;return{createProtectionSystem:a}}Object.defineProperty(c,"__esModule",{value:!0});var f=a(6),g=d(f),h=a(7),i=d(h),j=a(5),k=d(j),l=a(13),m=d(l),n=a(14),o=d(n),p=a(12),q=d(p),r=[{generateKeyRequest:"generateKeyRequest",addKey:"addKey",cancelKeyRequest:"cancelKeyRequest",needkey:"needkey",keyerror:"keyerror",keyadded:"keyadded",keymessage:"keymessage"},{generateKeyRequest:"webkitGenerateKeyRequest",addKey:"webkitAddKey",cancelKeyRequest:"webkitCancelKeyRequest",needkey:"webkitneedkey",keyerror:"webkitkeyerror",keyadded:"webkitkeyadded",keymessage:"webkitkeymessage"}],s=[{setMediaKeys:"setMediaKeys",MediaKeys:"MediaKeys",release:"close",needkey:"needkey",error:"keyerror",message:"keymessage",ready:"keyadded",close:"keyclose"},{setMediaKeys:"msSetMediaKeys",MediaKeys:"MSMediaKeys",release:"close",needkey:"msneedkey",error:"mskeyerror",message:"mskeymessage",ready:"mskeyadded",close:"mskeyclose"}];e.__dashjs_factory_name="Protection";var t=dashjs.FactoryMaker.getClassFactory(e);t.events=k.default,dashjs.FactoryMaker.updateClassFactory(e.__dashjs_factory_name,t),c.default=t,b.exports=c.default},{12:12,13:13,14:14,5:5,6:6,7:7}],5:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0});var g=function(a,b,c){for(var d=!0;d;){var e=a,f=b,g=c;d=!1,null===e&&(e=Function.prototype);var h=Object.getOwnPropertyDescriptor(e,f);if(void 0!==h){if("value"in h)return h.value;var i=h.get;if(void 0===i)return;return i.call(g)}var j=Object.getPrototypeOf(e);if(null===j)return;a=j,b=f,c=g,d=!0,h=j=void 0}},h=a(1),i=d(h),j=function(a){function b(){e(this,b),g(Object.getPrototypeOf(b.prototype),"constructor",this).call(this),this.INTERNAL_KEY_MESSAGE="internalKeyMessage",this.INTERNAL_KEY_SYSTEM_SELECTED="internalKeySystemSelected",this.INTERNAL_KEY_STATUS_CHANGED="internalkeyStatusChanged",this.KEY_ADDED="public_keyAdded",this.KEY_ERROR="public_keyError",this.KEY_MESSAGE="public_keyMessage",this.KEY_SESSION_CLOSED="public_keySessionClosed",this.KEY_SESSION_CREATED="public_keySessionCreated",this.KEY_SESSION_REMOVED="public_keySessionRemoved",this.KEY_STATUSES_CHANGED="public_keyStatusesChanged",this.KEY_SYSTEM_ACCESS_COMPLETE="public_keySystemAccessComplete",this.KEY_SYSTEM_SELECTED="public_keySystemSelected",this.LICENSE_REQUEST_COMPLETE="public_licenseRequestComplete",this.NEED_KEY="needkey",this.PROTECTION_CREATED="public_protectioncreated",this.PROTECTION_DESTROYED="public_protectiondestroyed",this.SERVER_CERTIFICATE_UPDATED="serverCertificateUpdated",this.TEARDOWN_COMPLETE="protectionTeardownComplete",this.VIDEO_ELEMENT_SELECTED="videoElementSelected"}return f(b,a),b}(i.default),k=new j;c.default=k,b.exports=c.default},{1:1}],6:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a){function b(){J=[],K=[],M="temporary",N=""}function c(){if(!(D&&D.hasOwnProperty("on")&&B&&B.hasOwnProperty("getSupportedKeySystemsFromContentProtection")))throw new Error("Missing config parameter(s)")}function d(a){if(!a)throw new Error("mediaInfo can not be null or undefined");c(),D.on(E.INTERNAL_KEY_MESSAGE,y,this),D.on(E.INTERNAL_KEY_STATUS_CHANGED,x,this),K.push(a);var b=B.getSupportedKeySystemsFromContentProtection(a.contentProtection);b&&b.length>0&&v(b,!0)}function e(a){return B.getSupportedKeySystemsFromContentProtection(a)}function f(a,b){var c=g.default.getPSSHForKeySystem(O,a),d=s(O);if(c){for(var e=C.getAllInitData(),f=0;f<e.length;f++)if(B.initDataEquals(c,e[f]))return void F("DRM: Ignoring initData because we have already seen it!");try{C.createKeySession(c,d,u(O),b)}catch(h){D.trigger(E.KEY_SESSION_CREATED,{data:null,error:"Error creating key session! "+h.message})}}else a?C.createKeySession(a,d,u(O),b):D.trigger(E.KEY_SESSION_CREATED,{data:null,error:"Selected key system is "+O.systemString+".  needkey/encrypted event contains no initData corresponding to that key system!"})}function h(a,b){C.loadKeySession(a,b,u(O))}function j(a){C.removeKeySession(a)}function l(a){C.closeKeySession(a)}function m(a){C.setServerCertificate(a)}function n(a){a?(C.setMediaElement(a),D.on(E.NEED_KEY,z,this)):null===a&&(C.setMediaElement(a),D.off(E.NEED_KEY,z,this))}function o(a){M=a}function p(a){N=a}function q(a){L=a,B.setProtectionData(a)}function r(){D.off(E.INTERNAL_KEY_MESSAGE,y,this),D.off(E.INTERNAL_KEY_STATUS_CHANGED,x,this),n(null),O=void 0,C&&(C.reset(),C=null),K=[]}function s(a){var b=null;if(a){var c=a.systemString;L&&(b=c in L?L[c]:null)}return b}function t(a){var b=s(a),c=[],d=[],e=b&&b.audioRobustness&&b.audioRobustness.length>0?b.audioRobustness:N,f=b&&b.videoRobustness&&b.videoRobustness.length>0?b.videoRobustness:N,g=u(a);return K.forEach(function(a){a.type===H.AUDIO?c.push(new i.default(a.codec,e)):a.type===H.VIDEO&&d.push(new i.default(a.codec,f))}),new k.default(c,d,"optional","temporary"===g?"optional":"required",[g])}function u(a){var b=s(a);return b&&b.sessionType?b.sessionType:M}function v(a,b){var c=this,d=[],e=void 0;if(O){for(e=0;e<a.length;e++)if(O===a[e].ks){var g=function(){d.push({ks:a[e].ks,configs:[t(O)]});var g=function d(g){D.off(E.KEY_SYSTEM_ACCESS_COMPLETE,d,c),g.error?b||D.trigger(E.KEY_SYSTEM_SELECTED,{error:"DRM: KeySystem Access Denied! -- "+g.error}):(F("DRM: KeySystem Access Granted"),D.trigger(E.KEY_SYSTEM_SELECTED,{data:g.data}),a[e].sessionId?h(a[e].sessionId,a[e].initData):a[e].initData&&f(a[e].initData,a[e].cdmData))};return D.on(E.KEY_SYSTEM_ACCESS_COMPLETE,g,c),C.requestKeySystemAccess(d),"break"}();if("break"===g)break}}else if(void 0===O){var i;!function(){O=null,J.push(a);for(var g=0;g<a.length;g++)d.push({ks:a[g].ks,configs:[t(a[g].ks)]});var j=void 0,k=function a(d){D.off(E.KEY_SYSTEM_ACCESS_COMPLETE,a,c),d.error?(O=void 0,D.off(E.INTERNAL_KEY_SYSTEM_SELECTED,i,c),b||D.trigger(E.KEY_SYSTEM_SELECTED,{data:null,error:"DRM: KeySystem Access Denied! -- "+d.error})):(j=d.data,F("DRM: KeySystem Access Granted ("+j.keySystem.systemString+")!  Selecting key system..."),C.selectKeySystem(j))};i=function a(d){if(D.off(E.INTERNAL_KEY_SYSTEM_SELECTED,a,c),D.off(E.KEY_SYSTEM_ACCESS_COMPLETE,k,c),d.error)O=void 0,b||D.trigger(E.KEY_SYSTEM_SELECTED,{data:null,error:"DRM: Error selecting key system! -- "+d.error});else{O=C.getKeySystem(),D.trigger(E.KEY_SYSTEM_SELECTED,{data:j});var g=s(O);g&&g.serverCertificate&&g.serverCertificate.length>0&&C.setServerCertificate(G.decodeArray(g.serverCertificate).buffer);for(var i=0;i<J.length;i++)for(e=0;e<J[i].length;e++)if(O===J[i][e].ks){if(B.isClearKey(O)&&g&&g.hasOwnProperty("clearkeys")){var l={kids:Object.keys(g.clearkeys)};J[i][e].initData=(new TextEncoder).encode(JSON.stringify(l))}J[i][e].sessionId?h(J[i][e].sessionId,J[i][e].initData):null!==J[i][e].initData&&f(J[i][e].initData,J[i][e].cdmData);break}}},D.on(E.INTERNAL_KEY_SYSTEM_SELECTED,i,c),D.on(E.KEY_SYSTEM_ACCESS_COMPLETE,k,c),C.requestKeySystemAccess(d)}()}else J.push(a)}function w(a,b){D.trigger(E.LICENSE_REQUEST_COMPLETE,{data:a,error:b})}function x(a){a.error?D.trigger(E.KEY_STATUSES_CHANGED,{data:null,error:"DRM: KeyStatusChange error! -- "+a.error}):F("DRM: key status = "+a.status)}function y(a){if(F("DRM: onKeyMessage"),a.error)return void F(a.error);var b=a.data;D.trigger(E.KEY_MESSAGE,{data:b});var c=b.messageType?b.messageType:"license-request",d=b.message,e=b.sessionToken,f=s(O),h=O?O.systemString:null,i=B.getLicenseServer(O,f,c),j={sessionToken:e,messageType:c};if(!d||0===d.byteLength)return void w(j,"DRM: Empty key message from CDM");if(!i)return F("DRM: License server request not required for this message (type = "+a.data.messageType+").  Session ID = "+e.getSessionID()),void w(j);if(B.isClearKey(O)){var k=B.processClearKeyLicenseRequest(O,f,d);if(k)return F("DRM: ClearKey license request handled by application!"),w(j),void C.updateKeySession(e,k)}var l=new XMLHttpRequest,m=null;if(f&&f.serverURL){var n=f.serverURL;"string"==typeof n&&""!==n?m=n:"object"==typeof n&&n.hasOwnProperty(c)&&(m=n[c])}else f&&f.laURL&&""!==f.laURL?m=f.laURL:(m=O.getLicenseServerURLFromInitData(g.default.getPSSHData(e.initData)))||(m=a.data.laURL);if(!(m=i.getServerURLFromMessage(m,d,c)))return void w(j,"DRM: No license server URL specified!");var o=function(a,b,c,d){var e=a.response?i.getErrorResponse(a.response,c,d):"NONE";w(b,"DRM: "+c+' update, XHR complete. status is "'+a.statusText+'" ('+a.status+"), readyState is "+a.readyState+".  Response is "+e)};l.open(i.getHTTPMethod(c),m,!0),l.responseType=i.getResponseType(h,c),l.onload=function(){if(200==this.status){var a=i.getLicenseMessage(this.response,h,c);null!==a?(w(j),C.updateKeySession(e,a)):o(this,j,h,c)}else o(this,j,h,c)},l.onabort=function(){w(j,"DRM: "+h+' update, XHR aborted. status is "'+this.statusText+'" ('+this.status+"), readyState is "+this.readyState)},l.onerror=function(){w(j,"DRM: "+h+' update, XHR error. status is "'+this.statusText+'" ('+this.status+"), readyState is "+this.readyState)};var p=function(a){if(a)for(var b in a)"authorization"===b.toLowerCase()&&(l.withCredentials=!0),l.setRequestHeader(b,a[b])};f&&p(f.httpRequestHeaders),p(O.getRequestHeadersFromMessage(d)),f&&"boolean"==typeof f.withCredentials&&(l.withCredentials=f.withCredentials),l.send(O.getLicenseRequestFromMessage(d))}function z(a){if(F("DRM: onNeedKey"),"cenc"!==a.key.initDataType)return void F("DRM:  Only 'cenc' initData is supported!  Ignoring initData of type: "+a.key.initDataType);var b=a.key.initData;if(ArrayBuffer.isView(b)&&(b=b.buffer),O){var c=g.default.getPSSHForKeySystem(O,b);if(c)for(var d=C.getAllInitData(),e=0;e<d.length;e++)if(B.initDataEquals(c,d[e]))return void F("DRM: Ignoring initData because we have already seen it!")}F("DRM: initData:",String.fromCharCode.apply(null,new Uint8Array(b)));var f=B.getSupportedKeySystems(b,L);if(0===f.length)return void F("DRM: Received needkey event with initData, but we don't support any of the key systems!");v(f,!1)}function A(){return B?B.getKeySystems():[]}a=a||{};var B=a.protectionKeyController,C=a.protectionModel,D=a.eventBus,E=a.events,F=a.log,G=a.BASE64,H=a.constants,I=void 0,J=void 0,K=void 0,L=void 0,M=void 0,N=void 0,O=void 0;return I={initializeForMedia:d,createKeySession:f,loadKeySession:h,removeKeySession:j,closeKeySession:l,setServerCertificate:m,setMediaElement:n,setSessionType:o,setRobustnessLevel:p,setProtectionData:q,getSupportedKeySystemsFromContentProtection:e,getKeySystems:A,reset:r},b(),I}Object.defineProperty(c,"__esModule",{value:!0});var f=a(3),g=d(f),h=a(25),i=d(h),j=a(24),k=d(j);e.__dashjs_factory_name="ProtectionController",c.default=dashjs.FactoryMaker.getClassFactory(e),b.exports=c.default},{24:24,25:25,3:3}],7:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(){function a(a){a&&(a.log&&(t=a.log),a.BASE64&&(x=a.BASE64))}function b(){v=[];var a=void 0;a=(0,o.default)(r).getInstance({BASE64:x}),v.push(a),a=(0,m.default)(r).getInstance({BASE64:x}),v.push(a),a=(0,i.default)(r).getInstance({BASE64:x}),v.push(a),z=a,a=(0,k.default)(r).getInstance({BASE64:x,log:t}),v.push(a),A=a}function c(){return v}function d(a){for(var b=0;b<v.length;b++)if(v[b].systemString===a)return v[b];return null}function e(a){return a===z||a===A}function f(a,b){if(a.byteLength===b.byteLength){for(var c=new Uint8Array(a),d=new Uint8Array(b),e=0;e<c.length;e++)if(c[e]!==d[e])return!1;return!0}return!1}function h(a){var b=void 0,c=void 0,d=void 0,e=void 0,f=[];if(a)for(d=0;d<v.length;++d)for(c=v[d],e=0;e<a.length;++e)b=a[e],b.schemeIdUri.toLowerCase()===c.schemeIdURI&&f.push({ks:c,initData:c.getInitData(b),cdmData:c.getCDMData(),sessionId:c.getSessionId(b)});return f}function j(a,b){for(var c=[],d=g.default.parsePSSHList(a),e=void 0,f=void 0,h=void 0,i=0;i<v.length;++i)e=v[i],f=e.systemString,h=!b||f in b,e.uuid in d&&h&&c.push({ks:e,initData:d[e.uuid],cdmData:e.getCDMData(),sessionId:e.getSessionId()});return c}function l(a,b,c){if("license-release"===c||"individualization-request"===c)return null;var d=null;return b&&b.hasOwnProperty("drmtoday")?d=(0,q.default)(r).getInstance({BASE64:x}):a.systemString===y.default.WIDEVINE_KEYSTEM_STRING?d=(0,u.default)(r).getInstance():a.systemString===y.default.PLAYREADY_KEYSTEM_STRING?d=(0,s.default)(r).getInstance():a.systemString===y.default.CLEARKEY_KEYSTEM_STRING&&(d=(0,w.default)(r).getInstance()),d}function n(a,b,c){try{return a.getClearKeysFromProtectionData(b,c)}catch(d){return t("Failed to retrieve clearkeys from ProtectionData"),null}}function p(a){for(var b=(function(b){var c=null;return a&&(c=b in a?a[b]:null),c}),c=0;c<v.length;c++){var d=v[c];d.hasOwnProperty("init")&&d.init(b(d.systemString))}}var r=this.context,t=void 0,v=void 0,x=void 0,z=void 0,A=void 0;return{initialize:b,setProtectionData:p,isClearKey:e,initDataEquals:f,getKeySystems:c,getKeySystemBySystemString:d,getSupportedKeySystemsFromContentProtection:h,getSupportedKeySystems:j,getLicenseServer:l,processClearKeyLicenseRequest:n,setConfig:a}}Object.defineProperty(c,"__esModule",{value:!0});var f=a(3),g=d(f),h=a(8),i=d(h),j=a(10),k=d(j),l=a(11),m=d(l),n=a(9),o=d(n),p=a(16),q=d(p),r=a(17),s=d(r),t=a(18),u=d(t),v=a(15),w=d(v),x=a(2),y=d(x);e.__dashjs_factory_name="ProtectionKeyController",c.default=dashjs.FactoryMaker.getSingletonFactory(e),b.exports=c.default},{10:10,11:11,15:15,16:16,17:17,18:18,2:2,3:3,8:8,9:9}],8:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a){function b(a,b){var c=null;if(a){for(var d=JSON.parse(String.fromCharCode.apply(null,new Uint8Array(b))),e=[],f=0;f<d.kids.length;f++){var h=d.kids[f],j=a.clearkeys&&a.clearkeys.hasOwnProperty(h)?a.clearkeys[h]:null;if(!j)throw new Error("DRM: ClearKey keyID ("+h+") is not known!");e.push(new g.default(h,j))}c=new i.default(e)}return c}function c(a){return k.default.parseInitDataFromContentProtection(a,l)}function d(){return null}function e(a){return new Uint8Array(a)}function f(){return null}function h(){return null}function j(){return null}a=a||{};var l=a.BASE64;return{uuid:n,schemeIdURI:p,systemString:o,getInitData:c,getRequestHeadersFromMessage:d,getLicenseRequestFromMessage:e,getLicenseServerURLFromInitData:f,getCDMData:h,getSessionId:j,getClearKeysFromProtectionData:b}}Object.defineProperty(c,"__esModule",{value:!0});var f=a(22),g=d(f),h=a(19),i=d(h),j=a(3),k=d(j),l=a(2),m=d(l),n="e2719d58-a985-b3c9-781a-b030af78d30e",o=m.default.CLEARKEY_KEYSTEM_STRING,p="urn:uuid:"+n;e.__dashjs_factory_name="KeySystemClearKey",c.default=dashjs.FactoryMaker.getSingletonFactory(e),b.exports=c.default},{19:19,2:2,22:22,3:3}],9:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a){function b(){if(!r||!r.hasOwnProperty("decodeArray")||!r.hasOwnProperty("decodeArray"))throw new Error("Missing config parameter(s)")}function c(a){var b=void 0,c=void 0,d={},e=new DOMParser,f="utf16"===q?new Uint16Array(a):new Uint8Array(a);b=String.fromCharCode.apply(null,f),c=e.parseFromString(b,"application/xml");for(var g=c.getElementsByTagName("name"),h=c.getElementsByTagName("value"),i=0;i<g.length;i++)d[g[i].childNodes[0].nodeValue]=h[i].childNodes[0].nodeValue;return d.hasOwnProperty("Content")&&(d["Content-Type"]=d.Content,delete d.Content),d}function d(a){var c=void 0,d=void 0,e=null,f=new DOMParser,g="utf16"===q?new Uint16Array(a):new Uint8Array(a);if(b(),c=String.fromCharCode.apply(null,g),d=f.parseFromString(c,"application/xml"),d.getElementsByTagName("Challenge")[0]){var h=d.getElementsByTagName("Challenge")[0].childNodes[0].nodeValue;h&&(e=r.decode(h))}return e}function e(a){if(a)for(var b=new DataView(a),c=b.getUint16(4,!0),d=6,e=new DOMParser,f=0;f<c;f++){var g=b.getUint16(d,!0);d+=2;var h=b.getUint16(d,!0);if(d+=2,1===g){var i=a.slice(d,d+h),j=String.fromCharCode.apply(null,new Uint16Array(i)),k=e.parseFromString(j,"application/xml");if(k.getElementsByTagName("LA_URL")[0]){var l=k.getElementsByTagName("LA_URL")[0].childNodes[0].nodeValue;if(l)return l}if(k.getElementsByTagName("LUI_URL")[0]){var m=k.getElementsByTagName("LUI_URL")[0].childNodes[0].nodeValue;if(m)return m}}else d+=h}return null}function f(a){var c=new Uint8Array([112,115,115,104,0,0,0,0]),d=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]),e=0,f=null,h=void 0,i=void 0,j=void 0,k=void 0,l=void 0;if(b(),"pssh"in a)return g.default.parseInitDataFromContentProtection(a,r);if("pro"in a)f=r.decodeArray(a.pro.__text);else{if(!("prheader"in a))return null;f=r.decodeArray(a.prheader.__text)}return h=f.length,i=4+c.length+d.length+4+h,j=new ArrayBuffer(i),k=new Uint8Array(j),l=new DataView(j),l.setUint32(e,i),e+=4,k.set(c,e),e+=c.length,k.set(d,e),e+=d.length,l.setUint32(e,h),e+=4,k.set(f,e),e+=h,k.buffer}function h(a){if("utf8"!==a&&"utf16"!==a)throw new Error("Illegal PlayReady message format! -- "+a);q=a}function i(a){a&&(n=a)}function o(){var a=void 0,c=void 0,d=void 0,e=void 0;if(b(),n&&n.cdmData){for(a=[],e=0;e<n.cdmData.length;++e)a.push(n.cdmData.charCodeAt(e)),a.push(0);for(a=String.fromCharCode.apply(null,a),a=r.encode(a),c=m.replace("%CUSTOMDATA%",a),d=[],e=0;e<c.length;++e)d.push(c.charCodeAt(e)),d.push(0);return new Uint8Array(d).buffer}return null}function p(){return null}a=a||{};var q="utf16",r=a.BASE64;return{uuid:j,schemeIdURI:l,systemString:k,getInitData:f,getRequestHeadersFromMessage:c,getLicenseRequestFromMessage:d,getLicenseServerURLFromInitData:e,getCDMData:o,getSessionId:p,setPlayReadyMessageFormat:h,init:i}}Object.defineProperty(c,"__esModule",{value:!0});var f=a(3),g=d(f),h=a(2),i=d(h),j="9a04f079-9840-4286-ab92-e65be0885f95",k=i.default.PLAYREADY_KEYSTEM_STRING,l="urn:uuid:"+j,m='<PlayReadyCDMData type="LicenseAcquisition"><LicenseAcquisition version="1.0" Proactive="false"><CustomData encoding="base64encoded">%CUSTOMDATA%</CustomData></LicenseAcquisition></PlayReadyCDMData>',n=void 0;e.__dashjs_factory_name="KeySystemPlayReady",c.default=dashjs.FactoryMaker.getSingletonFactory(e),b.exports=c.default},{2:2,3:3}],10:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a){function b(a,b){var c=null;if(a){for(var d=JSON.parse(String.fromCharCode.apply(null,new Uint8Array(b))),e=[],f=0;f<d.kids.length;f++){var h=d.kids[f],j=a.clearkeys&&a.clearkeys.hasOwnProperty(h)?a.clearkeys[h]:null;if(!j)throw new Error("DRM: ClearKey keyID ("+h+") is not known!");e.push(new g.default(h,j))}c=new i.default(e),m("Warning: ClearKey schemeIdURI is using W3C Common PSSH systemID (1077efec-c0b2-4d02-ace3-3c1e52e2fb4b) in Content Protection. See DASH-IF IOP v4.1 section 7.6.2.4")}return c}function c(a){return k.default.parseInitDataFromContentProtection(a,l)}function d(){return null}function e(a){return new Uint8Array(a)}function f(){return null}function h(){return null}function j(){return null}var l=a.BASE64,m=a.log;return{uuid:n,schemeIdURI:p,systemString:o,getInitData:c,getRequestHeadersFromMessage:d,getLicenseRequestFromMessage:e,getLicenseServerURLFromInitData:f,getCDMData:h,getSessionId:j,getClearKeysFromProtectionData:b}}Object.defineProperty(c,"__esModule",{value:!0});var f=a(22),g=d(f),h=a(19),i=d(h),j=a(3),k=d(j),l=a(2),m=d(l),n="1077efec-c0b2-4d02-ace3-3c1e52e2fb4b",o=m.default.CLEARKEY_KEYSTEM_STRING,p="urn:uuid:"+n;e.__dashjs_factory_name="KeySystemW3CClearKey",c.default=dashjs.FactoryMaker.getSingletonFactory(e),b.exports=c.default},{19:19,2:2,22:22,3:3}],11:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a){function b(a){a&&(m=a)}function c(a){return g.default.parseInitDataFromContentProtection(a,n)}function d(){return null}function e(a){return new Uint8Array(a)}function f(){return null}function h(){return null}function i(a){return m&&m.sessionId?m.sessionId:a&&a.sessionId?a.sessionId:null}a=a||{};var m=null,n=a.BASE64;return{uuid:j,schemeIdURI:l,systemString:k,init:b,getInitData:c,getRequestHeadersFromMessage:d,getLicenseRequestFromMessage:e,getLicenseServerURLFromInitData:f,getCDMData:h,getSessionId:i}}Object.defineProperty(c,"__esModule",{value:!0});var f=a(3),g=d(f),h=a(2),i=d(h),j="edef8ba9-79d6-4ace-a3c8-27dcd51d21ed",k=i.default.WIDEVINE_KEYSTEM_STRING,l="urn:uuid:"+j;e.__dashjs_factory_name="KeySystemWidevine",c.default=dashjs.FactoryMaker.getSingletonFactory(e),b.exports=c.default},{2:2,3:3}],12:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a){function b(){E=null,F=null,H=[],I=[],G=(0,g.default)(x).getInstance(),K=u()}function c(){E&&w();for(var a=0;a<I.length;a++)p(I[a]);y.trigger(z.TEARDOWN_COMPLETE)}function d(){return F}function e(){for(var a=[],b=0;b<H.length;b++)a.push(H[b].initData);for(var b=0;b<I.length;b++)a.push(I[b].initData);return a}function f(a){var b=E;b||(b=document.createElement("video"));for(var c=!1,d=0;d<a.length;d++)for(var e=a[d].ks.systemString,f=a[d].configs,g=null,h=null,i=0;i<f.length;i++){var j=f[i].videoCapabilities;if(j&&0!==j.length){h=[];for(var k=0;k<j.length;k++)""!==b.canPlayType(j[k].contentType,e)&&h.push(j[k])}if(!(!g&&!h||g&&0===g.length||h&&0===h.length)){c=!0;var l=new o.default(g,h),m=G.getKeySystemBySystemString(e);y.trigger(z.KEY_SYSTEM_ACCESS_COMPLETE,{data:new q.default(m,l)});break}}c||y.trigger(z.KEY_SYSTEM_ACCESS_COMPLETE,{error:"Key system access denied! -- No valid audio/video content configurations detected!"})}function h(a){F=a.keySystem,y.trigger(z.INTERNAL_KEY_SYSTEM_SELECTED)}function j(a){E!==a&&(E&&w(),(E=a)&&(E.addEventListener(B.keyerror,K),E.addEventListener(B.needkey,K),E.addEventListener(B.keymessage,K),E.addEventListener(B.keyadded,K),y.trigger(z.VIDEO_ELEMENT_SELECTED)))}function l(a){if(!F)throw new Error("Can not create sessions until you have selected a key system");if(J||0===I.length){var b={sessionID:null,initData:a,getSessionID:function(){return this.sessionID},getExpirationTime:function(){return NaN},getSessionType:function(){return"temporary"}};return H.push(b),E[B.generateKeyRequest](F.systemString,new Uint8Array(a)),b}throw new Error("Multiple sessions not allowed!")}function n(a,b){var c=a.sessionID;if(G.isClearKey(F))for(var d=0;d<b.keyPairs.length;d++)E[B.addKey](F.systemString,b.keyPairs[d].key,b.keyPairs[d].keyID,c);else E[B.addKey](F.systemString,new Uint8Array(b),new Uint8Array(a.initData),c)}function p(a){E[B.cancelKeyRequest](F.systemString,a.sessionID)}function r(){}function s(){}function t(){}function u(){return{handleEvent:function(a){var b=null;switch(a.type){case B.needkey:var c=ArrayBuffer.isView(a.initData)?a.initData.buffer:a.initData;y.trigger(z.NEED_KEY,{key:new i.default(c,"cenc")});break;case B.keyerror:if(b=v(I,a.sessionId),b||(b=v(H,a.sessionId)),b){var d="";switch(a.errorCode.code){case 1:d+="MEDIA_KEYERR_UNKNOWN - An unspecified error occurred. This value is used for errors that don't match any of the other codes.";break;case 2:d+="MEDIA_KEYERR_CLIENT - The Key System could not be installed or updated.";break;case 3:d+="MEDIA_KEYERR_SERVICE - The message passed into update indicated an error from the license service.";break;case 4:d+="MEDIA_KEYERR_OUTPUT - There is no available output device with the required characteristics for the content protection system.";break;case 5:d+="MEDIA_KEYERR_HARDWARECHANGE - A hardware configuration change caused a content protection error.";break;case 6:d+="MEDIA_KEYERR_DOMAIN - An error occurred in a multi-device domain licensing configuration. The most common error is a failure to join the domain."}d+="  System Code = "+a.systemCode,y.trigger(z.KEY_ERROR,{data:new k.default(b,d)})}else A("No session token found for key error");break;case B.keyadded:b=v(I,a.sessionId),b||(b=v(H,a.sessionId)),b?(A("DRM: Key added."),y.trigger(z.KEY_ADDED,{data:b})):A("No session token found for key added");break;case B.keymessage:if(J=null!==a.sessionId&&void 0!==a.sessionId,J?!(b=v(I,a.sessionId))&&H.length>0&&(b=H.shift(),I.push(b),b.sessionID=a.sessionId):H.length>0&&(b=H.shift(),I.push(b),0!==H.length&&C.mediaKeyMessageError("Multiple key sessions were creates with a user-agent that does not support sessionIDs!! Unpredictable behavior ahead!")),b){var e=ArrayBuffer.isView(a.message)?a.message.buffer:a.message;b.keyMessage=e,y.trigger(z.INTERNAL_KEY_MESSAGE,{data:new m.default(b,e,a.defaultURL)})}else A("No session token found for key message")}}}}function v(a,b){if(b&&a){for(var c=a.length,d=0;d<c;d++)if(a[d].sessionID==b)return a[d];return null}return null}function w(){E.removeEventListener(B.keyerror,K),E.removeEventListener(B.needkey,K),E.removeEventListener(B.keymessage,K),E.removeEventListener(B.keyadded,K)}a=a||{};var x=this.context,y=a.eventBus,z=a.events,A=a.log,B=a.api,C=a.errHandler,D=void 0,E=void 0,F=void 0,G=void 0,H=void 0,I=void 0,J=void 0,K=void 0;return D={getAllInitData:e,requestKeySystemAccess:f,getKeySystem:d,selectKeySystem:h,setMediaElement:j,createKeySession:l,updateKeySession:n,closeKeySession:p,setServerCertificate:r,loadKeySession:s,removeKeySession:t,reset:c},b(),D}Object.defineProperty(c,"__esModule",{value:!0});var f=a(7),g=d(f),h=a(26),i=d(h),j=a(20),k=d(j),l=a(21),m=d(l),n=a(24),o=d(n),p=a(23),q=d(p);e.__dashjs_factory_name="ProtectionModel_01b",c.default=dashjs.FactoryMaker.getClassFactory(e),b.exports=c.default},{20:20,21:21,23:23,24:24,26:26,7:7}],13:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a){function b(){E=null,F=null,G=null,H=[],J=(0,g.default)(z).getInstance(),I=w()}function c(){var a=H.length,b=void 0;0!==a?function(){for(var c=function(a){x(a),0===H.length&&(F?(F.removeEventListener("encrypted",I),F.setMediaKeys(null).then(function(){A.trigger(B.TEARDOWN_COMPLETE)})):A.trigger(B.TEARDOWN_COMPLETE))},d=0;d<a;d++)b=H[d],function(a){b.session.closed.then(function(){c(a)}),v(b).catch(function(){c(a)})}(b)}():A.trigger(B.TEARDOWN_COMPLETE)}function d(){return E}function e(){for(var a=[],b=0;b<H.length;b++)H[b].initData&&a.push(H[b].initData);return a}function f(a){u(a,0)}function h(a){a.mksa.createMediaKeys().then(function(b){E=a.keySystem,G=b,F?F.setMediaKeys(G).then(function(){A.trigger(B.INTERNAL_KEY_SYSTEM_SELECTED)}):A.trigger(B.INTERNAL_KEY_SYSTEM_SELECTED)}).catch(function(){A.trigger(B.INTERNAL_KEY_SYSTEM_SELECTED,{
error:"Error selecting keys system ("+a.keySystem.systemString+")! Could not create MediaKeys -- TODO"})})}function j(a){F!==a&&(F&&(F.removeEventListener("encrypted",I),F.setMediaKeys&&F.setMediaKeys(null)),(F=a)&&(F.addEventListener("encrypted",I),F.setMediaKeys&&G&&F.setMediaKeys(G)))}function l(a){if(!E||!G)throw new Error("Can not set server certificate until you have selected a key system");G.setServerCertificate(a).then(function(){C("DRM: License server certificate successfully updated."),A.trigger(B.SERVER_CERTIFICATE_UPDATED)}).catch(function(a){A.trigger(B.SERVER_CERTIFICATE_UPDATED,{error:"Error updating server certificate -- "+a.name})})}function n(a,b,c){if(!E||!G)throw new Error("Can not create sessions until you have selected a key system");var d=G.createSession(c),e=y(d,a,c),f=this.getKeySystem(),g=f.systemString===q.default.CLEARKEY_KEYSTEM_STRING&&b&&b.clearkeys?"keyids":"cenc";d.generateRequest(g,a).then(function(){C("DRM: Session created.  SessionID = "+e.getSessionID()),A.trigger(B.KEY_SESSION_CREATED,{data:e})}).catch(function(a){x(e),A.trigger(B.KEY_SESSION_CREATED,{data:null,error:"Error generating key request -- "+a.name})})}function p(a,b){var c=a.session;J.isClearKey(E)&&(b=b.toJWK()),c.update(b).catch(function(b){A.trigger(B.KEY_ERROR,{data:new k.default(a,"Error sending update() message! "+b.name)})})}function r(a,b,c){if(!E||!G)throw new Error("Can not load sessions until you have selected a key system");for(var d=0;d<H.length;d++)if(a===H[d].sessionId)return void C("DRM: Ignoring session ID because we have already seen it!");var e=G.createSession(c),f=y(e,b,c,a);e.load(a).then(function(b){b?(C("DRM: Session loaded.  SessionID = "+f.getSessionID()),A.trigger(B.KEY_SESSION_CREATED,{data:f})):(x(f),A.trigger(B.KEY_SESSION_CREATED,{data:null,error:"Could not load session! Invalid Session ID ("+a+")"}))}).catch(function(b){x(f),A.trigger(B.KEY_SESSION_CREATED,{data:null,error:"Could not load session ("+a+")! "+b.name})})}function s(a){a.session.remove().then(function(){C("DRM: Session removed.  SessionID = "+a.getSessionID()),A.trigger(B.KEY_SESSION_REMOVED,{data:a.getSessionID()})},function(b){A.trigger(B.KEY_SESSION_REMOVED,{data:null,error:"Error removing session ("+a.getSessionID()+"). "+b.name})})}function t(a){v(a).catch(function(b){x(a),A.trigger(B.KEY_SESSION_CLOSED,{data:null,error:"Error closing session ("+a.getSessionID()+") "+b.name})})}function u(a,b){if(void 0===navigator.requestMediaKeySystemAccess||"function"!=typeof navigator.requestMediaKeySystemAccess)return void A.trigger(B.KEY_SYSTEM_ACCESS_COMPLETE,{error:"Insecure origins are not allowed"});!function(b){var c=a[b].ks,d=a[b].configs;navigator.requestMediaKeySystemAccess(c.systemString,d).then(function(a){var b="function"==typeof a.getConfiguration?a.getConfiguration():null,d=new o.default(c,b);d.mksa=a,A.trigger(B.KEY_SYSTEM_ACCESS_COMPLETE,{data:d})}).catch(function(c){++b<a.length?u(a,b):A.trigger(B.KEY_SYSTEM_ACCESS_COMPLETE,{error:"Key system access denied! "+c.message})})}(b)}function v(a){var b=a.session;return b.removeEventListener("keystatuseschange",a),b.removeEventListener("message",a),b.close()}function w(){return{handleEvent:function(a){switch(a.type){case"encrypted":if(a.initData){var b=ArrayBuffer.isView(a.initData)?a.initData.buffer:a.initData;A.trigger(B.NEED_KEY,{key:new i.default(b,a.initDataType)})}}}}}function x(a){for(var b=0;b<H.length;b++)if(H[b]===a){H.splice(b,1);break}}function y(a,b,c,d){var e={session:a,initData:b,sessionId:d,handleEvent:function(a){switch(a.type){case"keystatuseschange":A.trigger(B.KEY_STATUSES_CHANGED,{data:this}),a.target.keyStatuses.forEach(function(){var a=void 0,b=void 0;switch(arguments&&arguments.length>0&&(arguments[0]&&("string"==typeof arguments[0]?a=arguments[0]:b=arguments[0]),arguments[1]&&("string"==typeof arguments[1]?a=arguments[1]:b=arguments[1])),a){case"expired":A.trigger(B.INTERNAL_KEY_STATUS_CHANGED,{error:"License has expired"});break;default:A.trigger(B.INTERNAL_KEY_STATUS_CHANGED,{status:a,keyId:b})}});break;case"message":var b=ArrayBuffer.isView(a.message)?a.message.buffer:a.message;A.trigger(B.INTERNAL_KEY_MESSAGE,{data:new m.default(this,b,void 0,a.messageType)})}},getSessionID:function(){return a.sessionId},getExpirationTime:function(){return a.expiration},getKeyStatuses:function(){return a.keyStatuses},getSessionType:function(){return c}};return a.addEventListener("keystatuseschange",e),a.addEventListener("message",e),a.closed.then(function(){x(e),C("DRM: Session closed.  SessionID = "+e.getSessionID()),A.trigger(B.KEY_SESSION_CLOSED,{data:e.getSessionID()})}),H.push(e),e}a=a||{};var z=this.context,A=a.eventBus,B=a.events,C=a.log,D=void 0,E=void 0,F=void 0,G=void 0,H=void 0,I=void 0,J=void 0;return D={getAllInitData:e,requestKeySystemAccess:f,getKeySystem:d,selectKeySystem:h,setMediaElement:j,setServerCertificate:l,createKeySession:n,updateKeySession:p,loadKeySession:r,removeKeySession:s,closeKeySession:t,reset:c},b(),D}Object.defineProperty(c,"__esModule",{value:!0});var f=a(7),g=d(f),h=a(26),i=d(h),j=a(20),k=d(j),l=a(21),m=d(l),n=a(23),o=d(n),p=a(2),q=d(p);e.__dashjs_factory_name="ProtectionModel_21Jan2015",c.default=dashjs.FactoryMaker.getClassFactory(e),b.exports=c.default},{2:2,20:20,21:21,23:23,26:26,7:7}],14:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a){function b(){D=null,E=null,F=null,G=null,H=[],J=(0,g.default)(x).getInstance(),I=u()}function c(){try{for(var a=0;a<H.length;a++)p(H[a]);D&&D.removeEventListener(B.needkey,I),y.trigger(z.TEARDOWN_COMPLETE)}catch(b){y.trigger(z.TEARDOWN_COMPLETE,{error:"Error tearing down key sessions and MediaKeys! -- "+b.message})}}function d(){return E}function e(){for(var a=[],b=0;b<H.length;b++)a.push(H[b].initData);return a}function f(a){for(var b=!1,c=0;c<a.length;c++)for(var d=a[c].ks.systemString,e=a[c].configs,f=null,g=null,h=0;h<e.length;h++){var i=e[h].audioCapabilities,j=e[h].videoCapabilities;if(i&&0!==i.length){f=[];for(var k=0;k<i.length;k++)window[B.MediaKeys].isTypeSupported(d,i[k].contentType)&&f.push(i[k])}if(j&&0!==j.length){g=[];for(var l=0;l<j.length;l++)window[B.MediaKeys].isTypeSupported(d,j[l].contentType)&&g.push(j[l])}if(!(!f&&!g||f&&0===f.length||g&&0===g.length)){b=!0;var m=new o.default(f,g),n=J.getKeySystemBySystemString(d);y.trigger(z.KEY_SYSTEM_ACCESS_COMPLETE,{data:new q.default(n,m)});break}}b||y.trigger(z.KEY_SYSTEM_ACCESS_COMPLETE,{error:"Key system access denied! -- No valid audio/video content configurations detected!"})}function h(a){try{F=a.mediaKeys=new window[B.MediaKeys](a.keySystem.systemString),E=a.keySystem,G=a,D&&v(),y.trigger(z.INTERNAL_KEY_SYSTEM_SELECTED)}catch(b){y.trigger(z.INTERNAL_KEY_SYSTEM_SELECTED,{error:"Error selecting keys system ("+E.systemString+")! Could not create MediaKeys -- TODO"})}}function j(a){D!==a&&(D&&D.removeEventListener(B.needkey,I),(D=a)&&(D.addEventListener(B.needkey,I),F&&v()))}function l(a,b,c,d){if(!E||!F||!G)throw new Error("Can not create sessions until you have selected a key system");var e=null;if(null!==G.ksConfiguration.videoCapabilities&&G.ksConfiguration.videoCapabilities.length>0&&(e=G.ksConfiguration.videoCapabilities[0]),null===e&&null!==G.ksConfiguration.audioCapabilities&&G.ksConfiguration.audioCapabilities.length>0&&(e=G.ksConfiguration.audioCapabilities[0]),null===e)throw new Error("Can not create sessions for unknown content types.");var f=e.contentType,g=F.createSession(f,new Uint8Array(a),d?new Uint8Array(d):null),h=w(g,a);g.addEventListener(B.error,h),g.addEventListener(B.message,h),g.addEventListener(B.ready,h),g.addEventListener(B.close,h),H.push(h),A("DRM: Session created.  SessionID = "+h.getSessionID()),y.trigger(z.KEY_SESSION_CREATED,{data:h})}function n(a,b){var c=a.session;J.isClearKey(E)?c.update(new Uint8Array(b.toJWK())):c.update(new Uint8Array(b))}function p(a){var b=a.session;b.removeEventListener(B.error,a),b.removeEventListener(B.message,a),b.removeEventListener(B.ready,a),b.removeEventListener(B.close,a);for(var c=0;c<H.length;c++)if(H[c]===a){H.splice(c,1);break}b[B.release]()}function r(){}function s(){}function t(){}function u(){return{handleEvent:function(a){switch(a.type){case B.needkey:if(a.initData){var b=ArrayBuffer.isView(a.initData)?a.initData.buffer:a.initData;y.trigger(z.NEED_KEY,{key:new i.default(b,"cenc")})}}}}}function v(){var a=null,b=function(){D.removeEventListener("loadedmetadata",a),D[B.setMediaKeys](F),y.trigger(z.VIDEO_ELEMENT_SELECTED)};D.readyState>=1?b():(a=b.bind(this),D.addEventListener("loadedmetadata",a))}function w(a,b){return{session:a,initData:b,getSessionID:function(){return this.session.sessionId},getExpirationTime:function(){return NaN},getSessionType:function(){return"temporary"},handleEvent:function(a){switch(a.type){case B.error:y.trigger(z.KEY_ERROR,{data:new k.default(this,"KeyError")});break;case B.message:var b=ArrayBuffer.isView(a.message)?a.message.buffer:a.message;y.trigger(z.INTERNAL_KEY_MESSAGE,{data:new m.default(this,b,a.destinationURL)});break;case B.ready:A("DRM: Key added."),y.trigger(z.KEY_ADDED);break;case B.close:A("DRM: Session closed.  SessionID = "+this.getSessionID()),y.trigger(z.KEY_SESSION_CLOSED,{data:this.getSessionID()})}}}}a=a||{};var x=this.context,y=a.eventBus,z=a.events,A=a.log,B=a.api,C=void 0,D=void 0,E=void 0,F=void 0,G=void 0,H=void 0,I=void 0,J=void 0;return C={getAllInitData:e,requestKeySystemAccess:f,getKeySystem:d,selectKeySystem:h,setMediaElement:j,createKeySession:l,updateKeySession:n,closeKeySession:p,setServerCertificate:r,loadKeySession:s,removeKeySession:t,reset:c},b(),C}Object.defineProperty(c,"__esModule",{value:!0});var f=a(7),g=d(f),h=a(26),i=d(h),j=a(20),k=d(j),l=a(21),m=d(l),n=a(24),o=d(n),p=a(23),q=d(p);e.__dashjs_factory_name="ProtectionModel_3Feb2014",c.default=dashjs.FactoryMaker.getClassFactory(e),b.exports=c.default},{20:20,21:21,23:23,24:24,26:26,7:7}],15:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(){function a(a,b){var c=JSON.parse(String.fromCharCode.apply(null,new Uint8Array(b)));a+="/?";for(var d=0;d<c.kids.length;d++)a+=c.kids[d]+"&";return a=a.substring(0,a.length-1)}function b(){return"GET"}function c(){return"json"}function d(a){if(!a.hasOwnProperty("keys"))return null;for(var b=[],c=0;c<a.keys.length;c++){var d=a.keys[c],e=d.kid.replace(/=/g,""),f=d.k.replace(/=/g,"");b.push(new g.default(e,f))}return new i.default(b)}function e(a){return String.fromCharCode.apply(null,new Uint8Array(a))}return{getServerURLFromMessage:a,getHTTPMethod:b,getResponseType:c,getLicenseMessage:d,getErrorResponse:e}}Object.defineProperty(c,"__esModule",{value:!0});var f=a(22),g=d(f),h=a(19),i=d(h);e.__dashjs_factory_name="ClearKey",c.default=dashjs.FactoryMaker.getSingletonFactory(e),b.exports=c.default},{19:19,22:22}],16:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a){function b(){if(!i||!i.hasOwnProperty("decodeArray"))throw new Error("Missing config parameter(s)")}function c(a){return a}function d(){return"POST"}function e(a){return j[a].responseType}function f(a,c){return b(),j[c].getLicenseMessage(a)}function h(a,b){return j[b].getErrorResponse(a)}a=a||{};var i=a.BASE64,j={};j[g.default.WIDEVINE_KEYSTEM_STRING]={responseType:"json",getLicenseMessage:function(a){return i.decodeArray(a.license)},getErrorResponse:function(a){return a}},j[g.default.PLAYREADY_KEYSTEM_STRING]={responseType:"arraybuffer",getLicenseMessage:function(a){return a},getErrorResponse:function(a){return String.fromCharCode.apply(null,new Uint8Array(a))}};return{getServerURLFromMessage:c,getHTTPMethod:d,getResponseType:e,getLicenseMessage:f,getErrorResponse:h}}Object.defineProperty(c,"__esModule",{value:!0});var f=a(2),g=d(f);e.__dashjs_factory_name="DRMToday",c.default=dashjs.FactoryMaker.getSingletonFactory(e),b.exports=c.default},{2:2}],17:[function(a,b,c){"use strict";function d(){function a(a){var b=String.fromCharCode.apply(null,new Uint8Array(a));return decodeURIComponent(escape(b))}function b(b){if(window.DOMParser){var c=a(b),d=new window.DOMParser,e=d.parseFromString(c,"text/xml"),f=e?e.getElementsByTagNameNS(i,"Envelope")[0]:null,g=f?f.getElementsByTagNameNS(i,"Body")[0]:null;if(g?g.getElementsByTagNameNS(i,"Fault")[0]:null)return null}return b}function c(b){var c="",d="",e="",f=-1,g=-1;if(window.DOMParser){var h=a(b),j=new window.DOMParser,k=j.parseFromString(h,"text/xml"),l=k?k.getElementsByTagNameNS(i,"Envelope")[0]:null,m=l?l.getElementsByTagNameNS(i,"Body")[0]:null,n=m?m.getElementsByTagNameNS(i,"Fault")[0]:null,o=n?n.getElementsByTagName("detail")[0]:null,p=o?o.getElementsByTagName("Exception")[0]:null,q=null;if(null===n)return h;q=n.getElementsByTagName("faultstring")[0].firstChild,c=q?q.nodeValue:null,null!==p&&(q=p.getElementsByTagName("StatusCode")[0],d=q?q.firstChild.nodeValue:null,q=p.getElementsByTagName("Message")[0],e=q?q.firstChild.nodeValue:null,f=e?e.lastIndexOf("[")+1:-1,g=e?e.indexOf("]"):-1,e=e?e.substring(f,g):"")}var r="code: "+d+", name: "+c;return e&&(r+=", message: "+e),r}function d(a){return a}function e(){return"POST"}function f(){return"arraybuffer"}function g(a){return b.call(this,a)}function h(a){return c.call(this,a)}var i="http://schemas.xmlsoap.org/soap/envelope/";return{getServerURLFromMessage:d,getHTTPMethod:e,getResponseType:f,getLicenseMessage:g,getErrorResponse:h}}Object.defineProperty(c,"__esModule",{value:!0}),d.__dashjs_factory_name="PlayReady",c.default=dashjs.FactoryMaker.getSingletonFactory(d),b.exports=c.default},{}],18:[function(a,b,c){"use strict";function d(){function a(a){return a}function b(){return"POST"}function c(){return"arraybuffer"}function d(a){return a}function e(a){return String.fromCharCode.apply(null,new Uint8Array(a))}return{getServerURLFromMessage:a,getHTTPMethod:b,getResponseType:c,getLicenseMessage:d,getErrorResponse:e}}Object.defineProperty(c,"__esModule",{value:!0}),d.__dashjs_factory_name="Widevine",c.default=dashjs.FactoryMaker.getSingletonFactory(d),b.exports=c.default},{}],19:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),f=function(){function a(b,c){if(d(this,a),c&&"persistent"!==c&&"temporary"!==c)throw new Error("Invalid ClearKey key set type!  Must be one of 'persistent' or 'temporary'");this.keyPairs=b,this.type=c}return e(a,[{key:"toJWK",value:function(){var a=void 0,b=this.keyPairs.length,c={keys:[]};for(a=0;a<b;a++){var d={kty:"oct",alg:"A128KW",kid:this.keyPairs[a].keyID,k:this.keyPairs[a].key};c.keys.push(d)}this.type&&(c.type=this.type);var e=JSON.stringify(c),f=e.length,g=new ArrayBuffer(f),h=new Uint8Array(g);for(a=0;a<f;a++)h[a]=e.charCodeAt(a);return g}}]),a}();c.default=f,b.exports=c.default},{}],20:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var e=function a(b,c){d(this,a),this.sessionToken=b,this.error=c};c.default=e,b.exports=c.default},{}],21:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var e=function a(b,c,e,f){d(this,a),this.sessionToken=b,this.message=c,this.defaultURL=e,this.messageType=f||"license-request"};c.default=e,b.exports=c.default},{}],22:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var e=function a(b,c){d(this,a),this.keyID=b,this.key=c};c.default=e,b.exports=c.default},{}],23:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var e=function a(b,c){d(this,a),this.keySystem=b,this.ksConfiguration=c};c.default=e,b.exports=c.default},{}],24:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var e=function a(b,c,e,f,g){d(this,a),this.initDataTypes=["cenc"],b&&b.length&&(this.audioCapabilities=b),c&&c.length&&(this.videoCapabilities=c),this.distinctiveIdentifier=e,this.persistentState=f,this.sessionTypes=g};c.default=e,b.exports=c.default},{}],25:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var e=function a(b,c){d(this,a),this.contentType=b,this.robustness=c};c.default=e,b.exports=c.default},{}],26:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var e=function a(b,c){d(this,a),this.initData=b,this.initDataType=c};c.default=e,b.exports=c.default},{}]},{},[4])(4)});
//# sourceMappingURL=dash.protection.min.js.map